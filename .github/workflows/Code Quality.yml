name: Code Quality

on: [push]

jobs:
  # Prettier:
  #   name: Prettier
  #   strategy:
  #     matrix:
  #       os: ['ubuntu-latest']
  #       node: ['14.x']
  #   runs-on: ${{ matrix.os }}
  #   steps:
  #     - uses: actions/checkout@v2.3.4
  #     - uses: actions/setup-node@v2.1.4
  #       with:
  #         node-version: ${{ matrix.node }}
  #         registry-url: 'https://registry.npmjs.org'
  #     - name: Install dependencies
  #       run: npm ci
  #     - name: Run Prettier
  #       run: npm run prettier

  # ESLint:
  #   name: ESLint
  #   strategy:
  #     matrix:
  #       os: ['ubuntu-latest']
  #       node: ['14.x']
  #   runs-on: ${{ matrix.os }}
  #   steps:
  #     - uses: actions/checkout@v2.3.4
  #     - uses: actions/setup-node@v2.1.4
  #       with:
  #         node-version: ${{ matrix.node }}
  #         registry-url: 'https://registry.npmjs.org'
  #     - name: Install dependencies
  #       run: npm ci
  #     - name: Run ESLint
  #       run: npm run lint

  Check:
    name: IPAM Checker
    strategy:
      matrix:
        os: ['ubuntu-latest']
        node: ['15.x']
    runs-on: ${{ matrix.os }}
    steps:
      - uses: actions/checkout@v2.3.4
      - uses: actions/setup-node@v2.1.4
        with:
          node-version: ${{ matrix.node }}
          registry-url: 'https://registry.npmjs.org'
      - name: Install dependencies
        run: npm ci
      - name: Setup Matcher
        run: echo "::add-matcher::./schemas/problem-matcher.json"
      - name: Run IPAM Checker
        run: npm run runBin runActions.ts
